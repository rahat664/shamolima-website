<section class="page-hero page-hero--navy" @fadeIn>
  <app-page-hero-carousel [images]="[
    'assets/work-activities/13.jpg',
    'assets/work-activities/14-1.jpg',
    'assets/work-activities/20220928_102317-scaled.jpg'
  ]" />
  <div class="page-hero__layer page-hero__layer--gradient"></div>
  <div class="page-hero__orb page-hero__orb--one"></div>
  <div class="page-hero__orb page-hero__orb--two"></div>

  <div class="container grid gap-12 lg:grid-cols-[minmax(0,1.15fr)_minmax(0,1fr)] lg:items-center" *ngIf="ui$ | async as ui">
    <div>
      <p class="kicker text-brand" appRevealOnScroll="fade">{{ ui.nav.workActivities }}</p>
      <h1 class="page-hero__title" appRevealOnScroll="up" [delay]="100">{{ ui.pages.workActivities.hero.title }}</h1>
      <p class="page-hero__lede">{{ ui.pages.workActivities.hero.lede }}</p>

      <div class="page-hero__tags">
        <span class="tag-chip" *ngFor="let tag of (ui.pages.workActivities.tags || [])">{{ tag }}</span>
      </div>

      <div class="page-hero__actions">
        <a routerLink="/contact" class="btn btn-primary btn--glow">{{ ui.buttons.contactUs }}</a>
      </div>
    </div>

    <div class="grid gap-4 sm:grid-cols-2">
      <article *ngFor="let stat of (ui.pages.workActivities.stats || []); let i = index" class="stat-card" appRevealOnScroll="zoom" [delay]="i * 150">
        <div class="stat-card__value">{{ stat.value }}</div>
        <p class="stat-card__label">{{ stat.label }}</p>
        <p *ngIf="stat.detail" class="stat-card__detail">
          {{ stat.detail }}
        </p>
      </article>
    </div>
  </div>
</section>

<section class="section section--bright" @fadeIn>
  <div class="container grid gap-10 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)]" *ngIf="ui$ | async as ui">
    <div>
      <p class="kicker text-brand" appRevealOnScroll="fade">{{ ui.pages.home.sections.integratedLogistics.kicker }}</p>
      <h2 class="section-title" appRevealOnScroll="up" [delay]="100">{{ ui.pages.home.sections.integratedLogistics.title }}</h2>
      <p class="section-lede">{{ ui.pages.workActivities.hero.lede }}</p>

      <div class="mt-10 grid gap-6 sm:grid-cols-2">
        <article *ngFor="let pillar of (ui.pages.workActivities.focusAreas || []); let i = index" class="activity-card group" appRevealOnScroll="up" [delay]="i * 100">
          <div class="activity-card__header">
            <span class="activity-card__badge">{{ pillar.badge }}</span>
            <div class="activity-card__icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
              </svg>
            </div>
          </div>
          <h3 class="activity-card__title">{{ pillar.title }}</h3>
          <p class="activity-card__copy">{{ pillar.copy }}</p>
          <div class="activity-card__arrow">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </div>
        </article>
      </div>
    </div>

    <aside class="insight-card" appRevealOnScroll="left" [delay]="200">
      <h3 class="insight-card__heading">{{ ui.pages.workActivities.recentPlaysHeading }}</h3>
      <ul class="insight-card__list">
        <li *ngFor="let item of (ui.pages.workActivities.milestones || [])">
          <span class="insight-card__title">{{ item.title }}</span>
          <span class="insight-card__detail">{{ item.detail }}</span>
        </li>
      </ul>

      <div *ngIf="contactEmail$ | async as email" class="insight-card__cta">
        <p class="font-semibold">{{ ui.pages.workActivities.planningCtaTitle }}</p>
        <p>{{ ui.pages.workActivities.planningCtaTextPrefix }}
          <a class="text-brand hover:underline" [href]="'mailto:' + email">{{ email }}</a>.
        </p>
      </div>
    </aside>
  </div>
</section>

<ng-container *ngIf="(spotlight$ | async) as spotlight">
  <section *ngIf="spotlight.length" class="section section--navy" @fadeIn>
    <div class="container" *ngIf="ui$ | async as ui">
      <div class="flex flex-wrap items-end justify-between gap-6">
        <div>
          <p class="kicker text-brand" appRevealOnScroll="fade">{{ ui.pages.home.sections.spotlight.kicker }}</p>
          <h2 class="section-title text-white" appRevealOnScroll="up" [delay]="100">{{ ui.pages.home.sections.spotlight.title }}</h2>
        </div>
        <p class="max-w-xl text-sm text-white/70">
          A curated look at recent heavy haul, rigging and installation work led by Shamolima project teams across Bangladesh.
        </p>
      </div>

      <div class="spotlight-carousel mt-10" *ngIf="spotlight as slides" (mouseenter)="pauseAutoplay()" (mouseleave)="resumeAutoplay()">
        <button class="carousel__nav carousel__nav--prev" type="button" [attr.aria-label]="ui.common.previous" (click)="prevSpotlight(slides.length)">&#10094;</button>
        <div class="carousel__viewport">
          <article *ngFor="let item of slides; let i = index; trackBy: trackByImage"
                   class="spotlight-card"
                   [class.is-active]="i === spotlightIndex"
                   [hidden]="i !== spotlightIndex">
            <img [src]="thumbFor(item.image)"
                 [attr.data-fullsrc]="fullFor(item.image)"
                 [alt]="item.caption"
                 loading="lazy"
                 decoding="async"
                 class="spotlight-card__image">
            <div class="spotlight-card__scrim"></div>
            <div class="spotlight-card__content">
              <span class="spotlight-card__badge">{{ ui.pages.home.sections.spotlight.badge }}</span>
              <h3 class="spotlight-card__title">{{ item.caption }}</h3>
            </div>
          </article>
        </div>
        <button class="carousel__nav carousel__nav--next" type="button" [attr.aria-label]="ui.common.next" (click)="nextSpotlight(slides.length)">&#10095;</button>
      </div>
    </div>
  </section>
</ng-container>

<section class="section" @fadeIn>
  <div class="container" *ngIf="ui$ | async as ui">
    <p class="kicker text-brand" appRevealOnScroll="fade">{{ ui.pages.home.sections.howWeDeliver.kicker }}</p>
    <h2 class="section-title" appRevealOnScroll="up" [delay]="100">{{ ui.pages.home.sections.howWeDeliver.title }}</h2>

    <div class="mt-10 grid gap-8 md:grid-cols-2">
      <article *ngFor="let phase of (ui.pages.workActivities.phases || []); index as idx" class="phase-card" appRevealOnScroll="up" [delay]="idx * 150">
        <div class="phase-card__index">{{ idx + 1 }}</div>
        <h3 class="phase-card__title">{{ phase.title }}</h3>
        <p class="phase-card__copy">{{ phase.copy }}</p>
        <ul class="phase-card__list">
          <li *ngFor="let point of phase.points">{{ point }}</li>
        </ul>
      </article>
    </div>
  </div>
</section>

<section class="section section--gallery" id="gallery" [@listStagger]>
  <div class="container" *ngIf="ui$ | async as ui">
    <div class="flex flex-wrap items-end justify-between gap-6">
      <div>
        <p class="kicker text-brand" appRevealOnScroll="fade">{{ ui.pages.home.sections.gallery.kicker }}</p>
        <h2 class="section-title" appRevealOnScroll="up" [delay]="10">{{ ui.pages.home.sections.gallery.title }}</h2>
        <p class="section-lede">{{ ui.pages.home.sections.gallery.description }}</p>
      </div>
    </div>

    <div *ngIf="archive$ | async as items" class="masonry mt-10 columns-1 sm:columns-2 lg:columns-3" data-gallery>
      <figure *ngFor="let item of items; index as i; trackBy: trackByImage" class="gallery-card" appRevealOnScroll="zoom" [delay]="i * 10" [threshold]="0.05">
        <img [src]="thumbFor(item.image)"
             [attr.data-fullsrc]="fullFor(item.image)"
             [alt]="item.caption"
             loading="lazy"
             decoding="async"
             class="gallery-card__image">
        <figcaption class="gallery-card__caption">
          {{ item.caption }}
        </figcaption>
      </figure>
    </div>

    <p class="mt-6 text-xs text-slate-500">{{ ui.pages.home.sections.gallery.note }}</p>
  </div>
</section>

<!-- Global overlay handles viewing; no local overlay here. -->

<app-footer />